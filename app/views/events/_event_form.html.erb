<%= render partial: "layouts/error_message", locals: {thing: @event} %>
<%= csrf_meta_tag %>
<div class="row">
  <div class="col-md-12">
      <%= form_for @event do |f| %>

          <%= f.label "Event Name", :class => "lb-lg" %>
          <%= f.text_field :name, :class => "form-control" %><br>

          <%= f.label "Event Date", :class => "lb-lg" %><br>
          <p>Reminder: Check the events homepage to ensure that today's event wasn't already created.</p>
          <%= f.date_select :date, {}, {class: "custom-select"} %><br><br>


          <%= f.label "Staff Count", :class => "lb-lg" %>
          <%= f.text_field :staff_count, :class => "form-control", placeholder: "# of staff" %><br>

          <%= f.label "Guest Count", :class => "lb-lg" %>
          <%= f.text_field :guest_count, :class => "form-control", placeholder: "# of guests" %><br>

          <%= f.submit "Submit", class: "btn btn-primary" %><br>

      <% end %>
      </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-6 justify-content-center">
      <%= form_for @event, html: {class: 'add-attendees'} do |f| %>
        <%= f.label "Attendees", :class => "lb-lg" %><br>
       <div id="attendees">
        <% if @event.contacts.length > 0 %>
          <% @event.contacts.map do |c| %>
            <%= c.name %>
            <a href="#" class="more-button" data-id="<%= c.id %>"><i class="material-icons">info</i></a><br>
          <% end %>
        <% end %>

        <%= f.fields_for :contacts do |ff| %>
          <%= ff.text_field :name, list: "contacts_autocomplete" %>
          <datalist id="contacts_autocomplete">
          <% @contacts.each do |c| %>
            <option data-id="<%= c.id %>" value="<%= c.name %>"></option>
          <% end %>
          </datalist>
        <% end %>

        <a href="#" class="lookup-button"><i class="material-icons">info</i></a>
        <a href="#" class="add-button" data-id="<%= params[:id] %>"><i class="material-icons">add_circle</i></a><br>
        Begin typing to find a new contact to add.<br>
    </div>
    </div>
    <div id="more-div" class="col-md-6 justify-content-center">
      <%= f.label "More Contact Info", :class => "lb-lg" %><br>
      Drill down by selecting any info icon on the page
    </div>
    <% end %>
  </div>







<%= javascript_include_tag "events" %>
